title: 《高性能网站建设指南》读书笔记
id: 750
categories:
  - 原创
date: 2012-05-29 21:13:11
tags:
---

事实证明，网站加载的时间主要耗费在HTML及其相关组件的加载上。根据性能黄金法则：
> 只有10%-20%的最终用户响应时间花在了下载HTML文档上。其余的80%-90%时间花在下载页面的组件（JS脚本，CSS，图片）。

这本书介绍了提高网站性能的14条规则。下面我将进行简要概括：

**规则1：减少HTTP请求**

使用图片地图导航；CSS Sprites 将多张图片合成一张图片，然后利用CSS定位到需要的图片；利用data：URL模式内联图片；合并脚本和CSS文件。

**规则2：使用内容发布网络**

内容发布网络（CDN）是一组分布在不同地理位置的服务器，用于更加有效地向用户发布内容。

**规则3：添加Expire头**

利用浏览器的缓存调高性能。如果想更新内容可以修改文件名，使原缓存失效。

**规则4：压缩组件**

利用HTTP头Accept-Encoding 和Content-Encoding来压缩组件。

**规则5：将样式表放在顶部**

使HTML文档更早的加载，防止白屏的发生。

**规则6：将脚本放在底部**

减少脚本的加载影响其他HTML内容的加载。

**规则7：避免CSS表达式**

可以利用事件处理器来动态改变样式，只有特定事件发生时才运行。

**规则8：使用外部JavaScript和CSS**

便于组件复用和维护。当然首页还是使用内联样式表和脚本文件较好。

**规则9：减少DNS查找**

利用浏览器DNS缓存。

**规则10：精简JavaScript**

一般情况下精简比混淆更有效。因为代码混淆存在维护，调试难等问题。常用的JS精简工具有[JSMIn](http://javascript.crockford.com/jsmin.html)。

**规则11：避免重定向**

多次HTTP请求严重影响页面加载。

**规则12：移除重复的脚本**

**规则13：配置或移除ETag**

**规则14：使Ajax可以缓存**