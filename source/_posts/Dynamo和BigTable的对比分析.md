title: Dynamo和BigTable的对比分析
id: 1197
categories:
  - MSE
date: 2013-04-04 17:08:18
tags:
---

本文将从实现这些系统的关键技术，如数据划分、数据一致性与可用性、负载均衡、容错控制，来对比分析Google的BigTable和Amazon的Dynamo。

**数据划分**

Dynamo采用一致性哈希的方式对数据进行划分。这种数据划分方式在数据存入时就将数据均匀地映射到系统的存储单元中，从而最大限度地避免系统单点存储的数据量过大的问题。同时，一致性哈希算法也为系统带来了良好的扩展性。

BigTable使用顺序分裂的方式进行数据划分。这种划分方式可以有效地利用系统资源，并能提供很好的扩展性。与使用哈希方式不同的是，顺序分裂的数据与存储节点并不存在直接映射的关系，需要有一个节点管理这些映射关系，这也使得整个系统的扩展性限制于这个管理节点的能力。

**数据一致性和可用性**

Dynamo和BigTable都采用副本冗余的方式来保证数据的高可用性。但是由于个系统采用不同的管理方式，它们的实现方式是不同的。Dynamo在整个哈希环上通过gossip机制进行通讯来完成副本的异步复制。BigTable则采用日志的方式来保证服务节点内存中的数据的可用性。

**负载均衡**

Dynamo采用了虚拟节点技术，通过虚拟化的手段将节点的服务能力单元化，将访问将访问压力较大的虚拟节点映射到服务能力较强的物理节点，达到访问压力的均衡。访问压力的均衡同时伴随着数据的均衡。为了最小化数据均衡过程中数据迁移的开销，Dynamo 同样采用虚拟化技术，量化节点的存储能力，将虚拟后的存储节点相对均匀地分散到集群哈希环上，避免数据均衡过程中全环的数据移动。

与Dynamo不同的是，BigTable 通过主控节点来监控各个子表服务器上的访问负载状态，利用主控节点调度管理子表服务器的分裂和迁移将访问压力均匀地分散到各个子表服务器上。由于BigTable 采用分布式文件系统作为数据的底层存储，因而访问压力均衡过程中并不涉及到存储数据的迁移操作，以一种巧妙的方式避免了数据均衡的问题。

**容错控制**

Dynamo通过各节点之间定期进行通信来了解节点的活动状态，从而侦测是否有失效存在。如果出现失效状态，，由于哈希方式的数据划分策略，使得系统中各个节点既作为存储节点也作为服务节点，服务迁移的过程伴随着大量的数据迁移，因而系统必须认真应对各种失效状态，以使失效恢复过程中尽量避免大规模存储数据迁移带来的系统开销。

BigTable通过分布式锁服务chubby来跟踪主控节点和子表节点的服务状态。如果出现失效状态，主控节点将停止失效的节点，并将相关服务转移到其他节点。服务的迁移并不涉及存储数据的移动，不会引入额外的系统开销，因而也就无需区分各种失效状态。这种依赖于底层分布式文件系统的共享存储方式，简化了系统的失效恢复。

上述差异归纳如下表所示。

[![dynamoVsBigtable](http://www.zhangmin.name/blog/wp-content/uploads/2013/04/dynamoVsBigtable.jpg)](http://www.zhangmin.name/blog/wp-content/uploads/2013/04/dynamoVsBigtable.jpg)

参考文献

1.郭斯杰，贾鸿飞，熊劲，互联网海量数据存储和处理技术综述，《信息技术快报》第7卷第5期

2.大数据101：非结构化数据分析

http://www.intel.cn/content/www/cn/zh/big-data/unstructured-data-analytics-paper.html